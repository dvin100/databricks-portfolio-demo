# This is a Databricks asset bundle definition for portfolio.
# See https://docs.databricks.com/dev-tools/bundles/index.html for documentation.
bundle:
  name: dashboard
  uuid: 79983cc3-2d1e-47c9-a383-6b1963654286
  
include:
  - "resources/*.yml"
  
sync:
  include:
    - "fixtures/dashboard/*.json"
  exclude:
    - "fixtures/pdf/*.pdf"
    - "fixtures/ticker/*.csv"

# Variable declarations. These variables are assigned in the dev/prod targets below.
variables:
  # Set the profile to use with this bundle
  # From the CLI: 
  ##    databricks auth login -p DEMO
  ##    export DATABRICKS_CONFIG_PROFILE='DEMO'
  #

  ####!!!!!!!!!!!!!!!!!! ONLY UPDATE THE DEFAULT VALUES IF YOU KNOW WHAT YOU ARE DOING !!!!####
  # You should only need to update the profile, email, catalog, schema. Leave the other values as is.
  profile:
    description: The profile to use for the workspace
    default: DEMO
  
  email: 
    description: Enter your email as this will be used for deployment 
    default: david.vincent@databricks.com

  catalog:
    description: Enter the catalog name to be used for deployment 
    default: demo
    
  schema:
    description: Enter the schema name to be used for deployment 
    default:  portfolio
  
  # Lakebase database instance name to be used for deployment of the app
  lakebase_portfolio_name:
    description: The name of the Lakebase database instance to be used for deployment of the app
    default: lakebase-portfolio
  
  # Databricks app name to be used for deployment of the app
  databricks_app_name:
    description: The name of the Databricks app to be used for deployment
    default: portfolio-chatbot-app

  # DO NOT MANUALLY CHANGE THE SQL WAREHOUSE ID, IT WILL BE UPDATED BY THE SQL_WAREHOUSE.SH SCRIPT.
  sql_warehouse:
    description: The warehouse ID to be used for deployment
    default: c2428717addcd2e3

    # DO NOT MANUALLY CHANGE THE SERVING ENDPOINT NAME, IT WILL BE UPDATED BY THE AGENT_BRICKS.SH SCRIPT.
  # Serving endpoint name to be used for deployment of the app and the agent bricks (Multi-agent supervisor)
  serving_endpoint_name:
    description: The name of the serving endpoint to be used for deployment
    default: mas-8c40fe20-endpoint


targets:
  dev:
    # The default target uses 'mode: development' to create a development copy.
    # - Deployed resources get prefixed with '[dev my_user_name]'
    # - Any job schedules and triggers are paused by default.
    # See also https://docs.databricks.com/dev-tools/bundles/deployment-modes.html.
    mode: development
    default: true
    workspace:
      profile: ${profile}



  # prod:
  #   mode: production
  #   workspace:
  #     profile: ${profile}
  #     # We explicitly deploy to /Workspace/Users/david.vincent@databricks.com to make sure we only have a single copy.
  #     root_path: /Workspace/Users/${email}/.bundle/${bundle.name}/${bundle.target}
  #   permissions:
  #     - user_name: ${email}
  #       level: CAN_MANAGE
  #   variables:
  #     email: 
  #       default: ${email}
  #     catalog: 
  #       default: ${catalog}
  #     schema:   
  #       default: ${schema}
